{"version":3,"sources":["webpack:///src/app/alerts/alert.service.ts","webpack:///src/app/http-interceptors/with-credentials-http-interceptor.ts","webpack:///src/app/app-initialize.service.ts","webpack:///src/app/core/sign-in/sign-in.service.ts","webpack:///src/app/core/api/api.ts","webpack:///src/app/pages/app/main-navigation/main-navigation.component.ts","webpack:///src/app/pages/app/main-navigation/main-navigation.component.html","webpack:///src/app/pages/app/app.component.ts","webpack:///src/app/pages/app/app.component.html","webpack:///src/app/core/users/user-name-already-used-error.ts","webpack:///src/app/core/users/user.service.ts","webpack:///src/app/pages/app/main-footer/main-footer.component.ts","webpack:///src/app/pages/app/main-footer/main-footer.component.html","webpack:///src/app/pages/users/users.component.html","webpack:///src/app/pages/users/users.component.ts","webpack:///src/environments/environment.ts","webpack:///src/app/core/users/user.ts","webpack:///src/app/alerts/alert.ts","webpack:///src/app/routing/app-routing.module.ts","webpack:///src/app/app.module.ts","webpack:///src/app/alerts/alert-type.ts","webpack:///src/app/alerts/alert-view/alert-view.component.ts","webpack:///src/app/alerts/alert-view/alert-view.component.html","webpack:///src/app/core/users/user-has-active-borrows-error.ts","webpack:///src/app/dialogs/confirm-dialog/confirm-dialog.component.ts","webpack:///src/app/dialogs/confirm-dialog/confirm-dialog.component.html","webpack:///src/app/pages/users/user-view-model.ts","webpack:///src/app/routing/can-activates/signed-in-can-activate.ts","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["AlertService","active","message","type","info","alert","push","setTimeout","shift","providedIn","WithCredentialsHttpInterceptor","request","next","requestWithCredentials","clone","withCredentials","handle","AppInitializeService","userService","signInService","getSignedIn","toPromise","user","signIn","SignInService","signedUserChanged","_signedUser","emit","API_URL","SIGN_OUT_URL","USER_MODULE_URL","LIBRARIAN_MODULE_URL","MainNavigationComponent","signOutUrl","userModuleUrl","librarianModuleUrl","location","signOut","window","href","signedUser","selector","templateUrl","styleUrls","AppComponent","UserNameAlreadyUsedError","Error","UserService","httpClient","apiUrl","options","parameters","idFilter","undefined","toString","userNameFilter","firstNameFilter","lastNameFilter","emailFilter","isLibrarianFilter","isAdministratorFilter","get","params","pipe","u","map","id","userName","firstName","lastName","email","isLibrarian","isAdministrator","e","status","password","withoutId","withPassword","post","userData","put","MainFooterComponent","UsersComponent","alertService","filterForm","idFilterValidator","valueChanges","subscribe","users","refreshUsers","isFiltred","addNewUser","newUser","isChanged","hasChanges","disable","emitEvent","enable","idFilterControl","value","invalid","parseInt","getAll","unshift","original","newUserName","newFirstName","newLastName","newEmail","newIsLibrarian","newIsAdministrator","newPassword","update","show","error","add","resetToOriginal","splice","indexOf","remove","filter","forEach","save","discard","control","test","invalidId","kontrola","validniRadky","element","document","createElement","addEventListener","file","files","reader","FileReader","readAsText","onload","soubor","result","radky","split","i","length","atributyUsera","validniRadek","pop","uzivatel","click","uzivatele","downloadBlob","Blob","fileName","blob","url","URL","createObjectURL","linkElement","download","revokeObjectURL","some","every","isValid","changesCount","saveAll","discardAll","environment","production","User","Alert","routes","path","component","canActivate","redirectTo","AppRoutingModule","forRoot","imports","exports","createAppInitializer","appInitializeService","intialize","AppModule","provide","useClass","multi","useFactory","deps","useValue","declarations","providers","entryComponents","bootstrap","AlertType","AlertViewComponent","warning","UserHasActiveBorrowsError","ConfirmDialogComponent","close","confirmed","modalElement","$","modal","nativeElement","on","title","UserViewModel","isUserNameValid","isPasswordValid","isEmailValid","SIGN_IN_URL","SignedInCanActivate","signInUrl","route","state","signedIn","bootstrapModule","err","console","webpackEmptyAsyncContext","req","Promise","resolve","then","code","keys","module"],"mappings":"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","file":"main-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { AlertType } from './alert-type';\nimport { Alert } from './alert';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AlertService {\n    readonly active: Alert[] = [];\n\n    show(message: string, type: AlertType = AlertType.info) {\n        let alert = new Alert(message, type);\n        this.active.push(alert);\n\n        setTimeout(() => this.active.shift(), 2000);\n    }\n}\n","import { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class WithCredentialsHttpInterceptor implements HttpInterceptor {\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        let requestWithCredentials = request.clone({\n            withCredentials: true\n        });\n        \n        return next.handle(requestWithCredentials);\n    }\n}","import { Injectable } from '@angular/core';\nimport { UserService } from './core/users/user.service';\nimport { SignInService } from './core/sign-in/sign-in.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AppInitializeService {\n    constructor(private readonly userService: UserService, private readonly signInService: SignInService) {\n\n    }\n\n    async intialize() {\n        let user = await this.userService.getSignedIn().toPromise();\n        if (user !== null)\n            this.signInService.signIn(user);\n    }\n}\n","import { Injectable, EventEmitter } from '@angular/core';\nimport { User } from '../users/user';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SignInService {\n    readonly signedUserChanged = new EventEmitter();\n\n    private _signedUser: User = null;\n\n    get signedUser(): User {\n        return this._signedUser;\n    }\n\n    signIn(user: User) {\n        this._signedUser = user;\n        this.signedUserChanged.emit();\n    }\n\n    signOut() {\n        this._signedUser = null;\n        this.signedUserChanged.emit();\n    }\n}\n","import { InjectionToken } from '@angular/core';\n\nexport const API_URL = new InjectionToken<string>(\"Url of api root.\");","import { Component, InjectionToken, Inject } from '@angular/core';\nimport { User } from 'src/app/core/users/user';\nimport { SignInService } from 'src/app/core/sign-in/sign-in.service';\nimport { Location } from '@angular/common';\n\nexport const SIGN_OUT_URL = new InjectionToken<string>(\"Sign out page url.\");\nexport const USER_MODULE_URL = new InjectionToken<string>(\"User module root page url.\");\nexport const LIBRARIAN_MODULE_URL = new InjectionToken<string>(\"Librarian module root page url.\");\n\n@Component({\n    selector: 'app-main-navigation',\n    templateUrl: './main-navigation.component.html',\n    styleUrls: ['./main-navigation.component.scss']\n})\nexport class MainNavigationComponent {\n    get signedUser(): User {\n        return this.signInService.signedUser;\n    }\n\n    constructor(private readonly signInService: SignInService, @Inject(SIGN_OUT_URL) private readonly signOutUrl: string, \n        @Inject(USER_MODULE_URL) readonly userModuleUrl: string, @Inject(LIBRARIAN_MODULE_URL) readonly librarianModuleUrl: string, \n        private readonly location: Location) {\n    }\n\n    signOut() {\n        this.signInService.signOut();\n        window.location.href = this.signOutUrl + \"?redirectUrl=\" + this.userModuleUrl;\n    }\n}\n","<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n    <a class=\"navbar-brand\" routerLink=\"/\">Knihovna SPŠ Trutnov</a>\n    <ng-container *ngIf=\"signedUser !== null\">\n        <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\"\n            aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse justify-content-end\" id=\"navbarNavAltMarkup\">\n            <div class=\"navbar-nav\">\n                <a class=\"nav-item nav-link\" routerLink=\"/users\" routerLinkActive=\"active\">\n                    <i class=\"fas fa-user-friends\"></i>\n                    Uživatelé\n                </a>\n                <a class=\"nav-item nav-link\" href=\"{{userModuleUrl}}\">\n                    <i class=\"fas fa-book\"></i>\n                    Uživatel\n                </a>\n                <a *ngIf=\"signedUser.isLibrarian\" class=\"nav-item nav-link\" href=\"{{librarianModuleUrl}}\">\n                    <i class=\"fas fa-book-medical\"></i>\n                    Knihovník\n                </a>\n                <div class=\"dropdown\">\n                    <button class=\"btn btn-link dropdown-toggle nav-item nav-link active text-left border-0\"\n                        role=\"button\" id=\"userDropdownMenuLink\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n                        aria-expanded=\"false\">\n                        <i class=\"fas fa-user\"></i>\n                        {{signedUser.userName}}\n                    </button>\n\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"userDropdownMenuLink\">\n                        <a class=\"dropdown-item btn btn-link pl-3\" (click)=\"signOut()\">\n                            <i class=\"fas fa-sign-out-alt pr-1\"></i>\n                            Odhlásit se\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n</nav>","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n\n}\n","<app-main-navigation></app-main-navigation>\n<router-outlet class=\"router-outlet-flex-grow-1\"></router-outlet>\n<app-main-footer></app-main-footer>\n    \n<div class=\"fixed-top p-5 alert-view-container\">\n    <app-alert-view></app-alert-view>\n</div>","export class UserNameAlreadyUsedError extends Error {\n    \n}","import { Injectable, Inject } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, throwError, of } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { User } from './user';\nimport { UserNameAlreadyUsedError } from './user-name-already-used-error';\nimport { API_URL } from '../api/api';\nimport { UserHasActiveBorrowsError } from './user-has-active-borrows-error';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class UserService {\n    public constructor(private readonly httpClient: HttpClient, @Inject(API_URL) private readonly apiUrl: string) {\n\n    }\n\n    getAll(options: { idFilter?: number, userNameFilter?: string, firstNameFilter?: string, lastNameFilter?: string, emailFilter?: string, \n        isLibrarianFilter?: boolean, isAdministratorFilter?: boolean } = {}): Observable<User[]> {\n        let parameters = {\n            ...options.idFilter !== undefined && { \"id-filter\": options.idFilter.toString() },\n            ...options.userNameFilter !== undefined && { \"user-name-filter\": options.userNameFilter },\n            ...options.firstNameFilter !== undefined && { \"first-name-filter\": options.firstNameFilter },\n            ...options.lastNameFilter !== undefined && { \"last-name-filter\": options.lastNameFilter },\n            ...options.emailFilter !== undefined && { \"email-filter\": options.emailFilter },\n            ...options.isLibrarianFilter !== undefined && { \"is-librarian-filter\": options.isLibrarianFilter.toString() },\n            ...options.isAdministratorFilter !== undefined && { \"is-administrator-filter\": options.isAdministratorFilter.toString() }\n        };\n\n        return this.httpClient.get<User[]>(`${this.apiUrl}/users/index.php`, { params: parameters }).pipe(\n            map(u => u.map(u => new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator)))\n        );\n    }\n\n    getById(id: number): Observable<User> {\n        return this.httpClient.get<User>(`${this.apiUrl}/users/index.php?id=${id}`).pipe(\n            map(u => new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator))\n        );\n    }\n\n    getSignedIn(): Observable<User> {\n        return this.httpClient.get<User>(`${this.apiUrl}/users/index.php?id=`).pipe(\n            catchError((e: HttpErrorResponse) => e.status === 401 ? of(null) : throwError(e)),\n            map(u => u === null ? null : new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator))\n        );\n    }\n\n    add(user: User, password: string): Observable<User> {\n        let { id, ...withoutId } = user;\n        let withPassword = { ...withoutId, password };\n\n        return this.httpClient.post<User>(`${this.apiUrl}/users/index.php`, withPassword).pipe(\n            catchError((e: HttpErrorResponse) => e.status === 409 ? throwError(new UserNameAlreadyUsedError()) : throwError(e)),\n            map(u => new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator))\n        );\n    }\n\n    update(user: User, password: string | undefined): Observable<User> {\n        let userData = password === undefined ? user : { ...user, password };\n\n        return this.httpClient.put<User>(`${this.apiUrl}/users/index.php?id=${user.id}`, userData).pipe(\n            catchError((e: HttpErrorResponse) => e.status === 409 ? throwError(new UserNameAlreadyUsedError()) : throwError(e)),\n            map(u => new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator))\n        );\n    }\n\n    remove(user: User): Observable<any> {\n        return this.httpClient.delete(`${this.apiUrl}/users/index.php?id=${user.id}`).pipe(\n            catchError((e: HttpErrorResponse) => e.status === 409 ? throwError(new UserHasActiveBorrowsError()) : throwError(e)),\n        )\n    }\n}","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'app-main-footer',\n    templateUrl: './main-footer.component.html',\n    styleUrls: ['./main-footer.component.scss']\n})\nexport class MainFooterComponent {\n\n}\n","<div class=\"p-1 pr-2 text-muted text-right text-sm\">\n    <small>\n        Administrace knihovny\n        <a href=\"https://www.spstrutnov.cz\" target=\"_blank\">SPŠ Trutnov</a>\n    </small>\n</div>","<div class=\"d-flex align-items-center\">\n    <h2 class=\"m-4 flex-grow-1\">Uživatelé</h2>\n    <button class=\"btn btn-secondary m-1\" (click)=\"export()\">Exportovat</button>\n    <button class=\"btn btn-secondary m-1 mr-4\"(click)=\"import()\">Importovat</button>\n</div>\n<table class=\"table table-striped table-hover\">\n    <thead>\n        <tr [formGroup]=\"filterForm\">\n            <th class=\"sticky-top bg-white table-column-id\">\n                Id\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"id\" [class.is-invalid]=\"!isIdFilterValid\">\n            </th>\n            <th class=\"table-column-fill sticky-top bg-white\">\n                Uživatelské jméno\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"userName\">\n            </th>\n            <th class=\"table-column-fill sticky-top bg-white align-top\">Heslo</th>\n            <th class=\"table-column-fill sticky-top bg-white\">\n                Jméno\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"firstName\">\n            </th>\n            <th class=\"table-column-fill sticky-top bg-white\">\n                Příjmení\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"lastName\">\n            </th>\n            <th class=\"table-column-fill sticky-top bg-white\">\n                Email\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"email\">\n            </th>\n            <th class=\"sticky-top bg-white\">\n                Knihovník\n                <div class=\"form-check text-center\">\n                    <input style=\"width: 18px; height: 19px; cursor: pointer;\" class=\"form-check-input position-static\"\n                        type=\"checkbox\" formControlName=\"isLibrarian\">\n                </div>\n            </th>\n            <th class=\"sticky-top bg-white\">\n                Administrátor\n                <div class=\"form-check text-center\">\n                    <input style=\"width: 18px; height: 19px; cursor: pointer;\" class=\"form-check-input position-static\"\n                        type=\"checkbox\" formControlName=\"isAdministrator\">\n                </div>\n            </th>\n            <th class=\"sticky-top bg-white text-nowrap\">\n                <small class=\"text-muted font-weight-normal text-center d-block pb-1\">{{changesText}}</small>\n                <button [class.invisible]=\"!hasChanges\" [disabled]=\"!isAllValid\" class=\"btn btn-sm btn-success mr-1\"\n                    (click)=\"saveAll()\">Uložit</button>\n                <button [class.invisible]=\"!hasChanges\" class=\"btn btn-sm btn-danger ml-1\"\n                    (click)=\"discardAll()\">Zahodit</button>\n            </th>\n            <th class=\"sticky-top bg-white\"></th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let user of users\"\n            [class.table-warning]=\"(user.isChanged || user.original === null) && user !== newUser\">\n            <td class=\"table-column-id align-middle\">\n                <ng-container *ngIf=\"user.original !== null\">{{user.original.id}}</ng-container>\n                <i *ngIf=\"user.original === null\" class=\"fas fa-plus\"></i>\n            </td>\n            <td class=\"table-column-fill\">\n                <input [class.is-invalid]=\"!user.isUserNameValid && user !== newUser\"\n                    class=\"form-control form-control-sm editable-cell\" placeholder=\"Nevyplněno\" type=\"text\"\n                    [(ngModel)]=\"user.newUserName\">\n            </td>\n            <td class=\"table-column-fill\">\n                <input [class.is-invalid]=\"!user.isPasswordValid && user !== newUser\"\n                    class=\"form-control form-control-sm editable-cell\"\n                    [placeholder]=\"user.original === null ? 'Nevyplněno' : 'Nezměněno'\" type=\"password\"\n                    [(ngModel)]=\"user.newPassword\">\n            </td>\n            <td class=\"table-column-fill\">\n                <input class=\"form-control form-control-sm editable-cell\" placeholder=\"Nevyplněno\" type=\"text\"\n                    [(ngModel)]=\"user.newFirstName\">\n            </td>\n            <td class=\"table-column-fill\">\n                <input class=\"form-control form-control-sm editable-cell\" placeholder=\"Nevyplněno\" type=\"text\"\n                    [(ngModel)]=\"user.newLastName\">\n            </td>\n            <td class=\"table-column-fill\">\n                <input [class.is-invalid]=\"!user.isEmailValid && user !== newUser\"\n                    class=\"form-control form-control-sm editable-cell\" placeholder=\"Nevyplněno\" type=\"text\"\n                    [(ngModel)]=\"user.newEmail\">\n            </td>\n            <td>\n                <div class=\"form-check text-center\">\n                    <input style=\"width: 18px; height: 19px; cursor: pointer;\" class=\"form-check-input position-static\"\n                        type=\"checkbox\" [(ngModel)]=\"user.newIsLibrarian\">\n                </div>\n            </td>\n            <td>\n                <div class=\"form-check text-center\">\n                    <input style=\"width: 18px; height: 19px; cursor: pointer;\" class=\"form-check-input position-static\"\n                        type=\"checkbox\" [(ngModel)]=\"user.newIsAdministrator\">\n                </div>\n            </td>\n            <td class=\"pr-0 text-nowrap\">\n                <button [class.invisible]=\"!user.isChanged && user.original !== null || user === newUser\"\n                    [disabled]=\"!user.isValid\" class=\"btn btn-sm btn-success mr-1\" (click)=\"save(user)\">Uložit</button>\n                <button [class.invisible]=\"!user.isChanged && user.original !== null || user === newUser\"\n                    class=\"btn btn-sm btn-danger ml-1\" (click)=\"discard(user)\">Zahodit</button>\n            </td>\n            <td>\n                <i *ngIf=\"user.original !== null\" class=\"fas fa-trash fa-2x cursor-pointer text-muted\"\n                    style=\"font-size: 1.5em\" (click)=\"remove(user)\"></i>\n            </td>\n        </tr>\n    </tbody>\n</table>\n<div *ngIf=\"users === undefined\" class=\"flex-grow-1 d-flex justify-content-center align-items-center\">\n    <div class=\"spinner-border\" role=\"status\">\n        <span class=\"sr-only\">Načítání...</span>\n    </div>\n</div>\n<div *ngIf=\"users !== undefined && users.length === 1 && !isFiltred\" class=\"flex-grow-1 d-flex justify-content-center align-items-center\">\n    <span class=\"text-muted\">Databáze neobsahuje žádné záznamy.</span>\n</div>\n<div *ngIf=\"users !== undefined && users.length === 0 && isFiltred\" class=\"flex-grow-1 d-flex justify-content-center align-items-center\">\n    <span class=\"text-muted\">Podle zadaných kritérií nebyly nalezeny žádné záznamy.</span>\n</div>","import { Component, OnInit, OnChanges, SimpleChanges, DoCheck } from '@angular/core';\nimport { UserService } from 'src/app/core/users/user.service';\nimport { User } from 'src/app/core/users/user';\nimport { UserViewModel } from './user-view-model';\nimport { AlertService } from 'src/app/alerts/alert.service';\nimport { AlertType } from 'src/app/alerts/alert-type';\nimport { UserNameAlreadyUsedError } from 'src/app/core/users/user-name-already-used-error';\nimport { FormGroup, FormControl, Validators, ValidationErrors, AbstractControl } from '@angular/forms';\nimport { UserHasActiveBorrowsError } from 'src/app/core/users/user-has-active-borrows-error';\n\n@Component({\n    selector: 'app-users',\n    templateUrl: './users.component.html',\n    styleUrls: ['./users.component.scss']\n})\nexport class UsersComponent implements OnInit, DoCheck {\n    users: UserViewModel[];\n    newUser: UserViewModel;\n\n    filterForm = new FormGroup({\n        id: new FormControl(\"\", this.idFilterValidator),\n        userName: new FormControl(\"\"),\n        firstName: new FormControl(\"\"),\n        lastName: new FormControl(\"\"),\n        email: new FormControl(\"\"),\n        isLibrarian: new FormControl(false),\n        isAdministrator: new FormControl(false)\n    });\n\n    get hasChanges(): boolean {\n        return this.users !== undefined && this.users.some(u => (u.isChanged || u.original === null) && u !== this.newUser)\n    }\n\n    get isAllValid(): boolean {\n        return this.users === undefined || this.users.every(u => u.isValid || u === this.newUser);\n    }\n\n    get isFiltred(): boolean {\n        return this.filterForm.get(\"id\").value != \"\" || this.filterForm.get(\"userName\").value != \"\" || this.filterForm.get(\"firstName\").value != \"\" ||\n            this.filterForm.get(\"lastName\").value != \"\" || this.filterForm.get(\"email\").value != \"\" || this.filterForm.get(\"isLibrarian\").value != false ||\n            this.filterForm.get(\"isAdministrator\").value != false;\n    }\n\n    get isIdFilterValid(): boolean {\n        return !this.filterForm.get(\"id\").invalid;\n    }\n\n    get changesText(): string {\n        if (this.users === undefined)\n            return \"\";\n\n        let changesCount = this.users\n            .filter(u => u.isChanged)\n            .length;\n\n        if (changesCount === 0)\n            return \"\";\n        else if (changesCount === 1)\n            return `${changesCount} změna.`;\n        else if (changesCount > 1 && changesCount < 5)\n            return `${changesCount} změny.`;\n        else\n            return `${changesCount} změn.`;\n    }\n\n    constructor(private readonly userService: UserService, private readonly alertService: AlertService) {\n        this.filterForm.valueChanges.subscribe(async () => {\n            this.users = undefined;\n\n            await this.refreshUsers();\n\n            if (!this.isFiltred)\n                this.addNewUser();\n        });\n    }\n\n    async ngOnInit() {\n        await this.refreshUsers();\n        this.addNewUser();\n    }\n\n    ngDoCheck() {\n        if (this.newUser != undefined && this.newUser.isChanged)\n            this.addNewUser();\n\n        if (this.hasChanges)\n            this.filterForm.disable({ emitEvent: false });\n        else\n            this.filterForm.enable({ emitEvent: false });\n    }\n\n    private async refreshUsers() {\n        let idFilterControl = this.filterForm.get(\"id\");\n        let idFilter = idFilterControl.value;\n        let userNameFilter = this.filterForm.get(\"userName\").value;\n        let firstNameFilter = this.filterForm.get(\"firstName\").value;\n        let lastNameFilter = this.filterForm.get(\"lastName\").value;\n        let emailFilter = this.filterForm.get(\"email\").value;\n        let isLibrarianFilter = this.filterForm.get(\"isLibrarian\").value;\n        let isAdministratorFilter = this.filterForm.get(\"isAdministrator\").value;\n\n        let options = {\n            ...idFilter !== \"\" && !idFilterControl.invalid && { idFilter: parseInt(idFilter) },\n            ...userNameFilter !== \"\" && { userNameFilter },\n            ...firstNameFilter !== \"\" && { firstNameFilter },\n            ...lastNameFilter !== \"\" && { lastNameFilter },\n            ...emailFilter !== \"\" && { emailFilter },\n            ...isLibrarianFilter !== false && { isLibrarianFilter },\n            ...isAdministratorFilter !== false && { isAdministratorFilter }\n        };\n\n        this.users = (await this.userService.getAll(options).toPromise())\n            .map(u => new UserViewModel(u, u.userName, \"\", u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator));\n    }\n\n    private addNewUser() {\n        this.newUser = new UserViewModel(null, \"\", \"\", \"\", \"\", \"\", false, false);\n        this.users.unshift(this.newUser);\n    }\n\n    async save(user: UserViewModel) {\n        let newUser;\n        if (user.original != null) {\n            let u = new User(user.original.id, user.newUserName, user.newFirstName, user.newLastName, user.newEmail, user.newIsLibrarian, user.newIsAdministrator);\n            let newPassword = user.newPassword === \"\" ? undefined : user.newPassword;\n            try {\n                newUser = await this.userService.update(u, newPassword).toPromise();\n            }\n            catch (e) {\n                if (e instanceof UserNameAlreadyUsedError) {\n                    this.alertService.show(`Uživatelské jméno '${u.userName}' již používá někdo jiný.`, AlertType.error);\n                    return;\n                }\n                throw e;\n            }\n        }\n        else {\n            let u = new User(0, user.newUserName, user.newFirstName, user.newLastName, user.newEmail, user.newIsLibrarian, user.newIsAdministrator);\n            try {\n                newUser = await this.userService.add(u, user.newPassword).toPromise();\n            }\n            catch (e) {\n                if (e instanceof UserNameAlreadyUsedError) {\n                    this.alertService.show(`Uživatelské jméno '${u.userName}' již používá někdo jiný.`, AlertType.error);\n                    return;\n                }\n                throw e;\n            }\n        }\n        user.original = newUser;\n        user.resetToOriginal();\n    }\n\n    discard(user: UserViewModel) {\n        if (user.original == null)\n            this.users.splice(this.users.indexOf(user), 1);\n        else\n            user.resetToOriginal();\n    }\n\n    async remove(user: UserViewModel) {\n        try {\n            await this.userService.remove(user.original).toPromise();\n            this.users.splice(this.users.indexOf(user), 1);\n        }\n        catch (e) {\n            if (e instanceof UserHasActiveBorrowsError) {\n                this.alertService.show(\"Nelze smazat uživatele s aktivními výpůjčkami.\", AlertType.error);\n                return;\n            }\n            throw e;\n        }\n    }\n\n    saveAll() {\n        this.users\n            .filter(u => u.isChanged)\n            .forEach(u => this.save(u));\n    }\n\n    discardAll() {\n        this.users\n            .filter(u => u.isChanged || u.original === null && u !== this.newUser)\n            .forEach(u => this.discard(u));\n    }\n\n    private idFilterValidator(control: AbstractControl): ValidationErrors | null {\n        if (/^(0|(-?[1-9][0-9]*)|)$/.test(control.value))\n            return null;\n        else\n            return { invalidId: true };\n    }\n\n    import() {\n        let kontrola = 0;\n        let validniRadky = [];\n        let element = document.createElement(\"input\");\n        element.type = \"file\";\n        element.addEventListener(\"change\", () => {\n            let file = element.files[0];\n            let reader = new FileReader();\n            reader.readAsText(file, \"UTF-8\");\n            reader.onload = () => {\n                let soubor = <string>reader.result;\n                let radky = soubor.split(/\\r\\n?|\\n/);\n\n                for (let i = 0; i < radky.length; i++) {\n                    let atributyUsera = radky[i].split(\",\");\n                    if (atributyUsera.length != 7 || (atributyUsera[5] != \"true\" && atributyUsera[5] != \"false\") || (atributyUsera[6] != \"true\" && atributyUsera[6] != \"false\")) {\n                        this.alertService.show(\"Chyba na řádku \" + (i + 1), AlertType.error);\n                        kontrola++;\n                    }\n                    else {\n                        validniRadky.push(atributyUsera);\n                    }\n                }\n                if (kontrola == 0) {\n                    for (let i = 0; i < radky.length; i++) {\n                        let validniRadek = validniRadky.pop();\n                        let uzivatel = new UserViewModel(null, validniRadek[0], validniRadek[1], validniRadek[2], validniRadek[3], validniRadek[4], validniRadek[5] === \"true\", validniRadek[6] === \"true\");\n                        this.users.unshift(uzivatel);\n                    }\n                }\n            }\n        });\n        element.click();\n    }\n\n    async export() {\n        let soubor = \"\";\n        let uzivatele = await this.userService.getAll().toPromise();\n        for (let i = 0; i < uzivatele.length; i++) {\n            let uzivatel = uzivatele[i];\n            if (i != 0)\n                soubor += \"\\n\";\n            soubor += uzivatel.userName;\n            soubor += \",\";\n            soubor += uzivatel.firstName;\n            soubor += \",\";\n            soubor += uzivatel.lastName;\n            soubor += \",\";\n            soubor += uzivatel.email;\n            soubor += \",\";\n            soubor += uzivatel.isLibrarian;\n            soubor += \",\";\n            soubor += uzivatel.isAdministrator;\n        }\n        this.downloadBlob(\"Sysadmin - export uživatelů.txt\", new Blob([soubor]));\n    }\n\n    private downloadBlob(fileName: string, blob: Blob) {\n        let url = URL.createObjectURL(blob);\n\n        let linkElement = document.createElement(\"a\");\n        linkElement.download = fileName;\n        linkElement.href = url;\n\n        linkElement.click();\n\n        URL.revokeObjectURL(url);\n    }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","export class User {\n    constructor(\n        public readonly id: number, \n        public readonly userName: string,\n        public readonly firstName: string,\n        public readonly lastName: string,\n        public readonly email: string,\n        public readonly isLibrarian: boolean,\n        public readonly isAdministrator: boolean\n    ) { }\n}","import { AlertType } from './alert-type';\n\nexport class Alert {\n    constructor(\n        public readonly message: string,\n        public readonly type: AlertType\n    ) { }\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { UsersComponent } from '../pages/users/users.component';\nimport { SignedInCanActivate } from './can-activates/signed-in-can-activate';\n\nconst routes: Routes = [\n    { path: \"users\", component: UsersComponent, canActivate: [SignedInCanActivate] },\n    { path: \"**\", redirectTo: \"users\" }\n];\n\n@NgModule({\n    imports: [RouterModule.forRoot(routes)],\n    exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { BrowserModule } from '@angular/platform-browser';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { NgModule, APP_INITIALIZER } from '@angular/core';\nimport { AppRoutingModule } from './routing/app-routing.module';\nimport { AppComponent } from './pages/app/app.component';\nimport { UsersComponent } from './pages/users/users.component';\nimport { MainNavigationComponent, SIGN_OUT_URL, USER_MODULE_URL, LIBRARIAN_MODULE_URL } from './pages/app/main-navigation/main-navigation.component';\nimport { AlertViewComponent } from './alerts/alert-view/alert-view.component';\nimport { API_URL } from './core/api/api';\nimport { ConfirmDialogComponent } from './dialogs/confirm-dialog/confirm-dialog.component';\nimport { MainFooterComponent } from './pages/app/main-footer/main-footer.component';\nimport { SIGN_IN_URL } from './routing/can-activates/signed-in-can-activate';\nimport { WithCredentialsHttpInterceptor } from './http-interceptors/with-credentials-http-interceptor';\nimport { AppInitializeService } from './app-initialize.service';\n\nexport function createAppInitializer(appInitializeService: AppInitializeService) {\n    return async () => await appInitializeService.intialize();\n}\n\n@NgModule({\n    declarations: [\n        AppComponent,\n        UsersComponent,\n        MainNavigationComponent,\n        AlertViewComponent,\n        ConfirmDialogComponent,\n        MainFooterComponent\n    ],\n    imports: [\n        BrowserModule,\n        FormsModule,\n        ReactiveFormsModule,\n        HttpClientModule,\n        AppRoutingModule\n    ],\n    providers: [\n        {\n            provide: HTTP_INTERCEPTORS,\n            useClass: WithCredentialsHttpInterceptor,\n            multi: true\n        },\n        {\n            provide: APP_INITIALIZER,\n            useFactory: createAppInitializer,\n            deps: [AppInitializeService],\n            multi: true\n        },\n        {\n            provide: API_URL,\n            useValue: \"/knihovna/sysadmin/api\"\n        },\n        {\n            provide: SIGN_IN_URL,\n            useValue: \"/knihovna/authentication/signIn.php\"\n        },\n        {\n            provide: SIGN_OUT_URL,\n            useValue: \"/knihovna/authentication/signOut.php\"\n        },\n        {\n            provide: USER_MODULE_URL,\n            useValue: \"/knihovna/uzivatel\"\n        },\n        {\n            provide: LIBRARIAN_MODULE_URL,\n            useValue: \"/knihovna/knihovnik\"\n        }\n    ],\n    entryComponents: [\n        ConfirmDialogComponent\n    ],\n    bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","export enum AlertType {\n    info,\n    warning,\n    error\n}","import { Component } from '@angular/core';\nimport { AlertService } from '../alert.service';\nimport { Alert } from '../alert';\nimport { AlertType } from '../alert-type';\n\n@Component({\n    selector: 'app-alert-view',\n    templateUrl: './alert-view.component.html',\n    styleUrls: ['./alert-view.component.scss']\n})\nexport class AlertViewComponent {\n    get activeAlerts(): Alert[] {\n        return this.alertService.active;\n    }\n\n    getAlertClass(alert: Alert): string {\n        switch (alert.type) {\n            case AlertType.warning:\n                return \"alert-warning\";\n            case AlertType.error:\n                return \"alert-danger\";\n            default:\n                return \"alert-info\";\n        }\n    }\n\n    constructor(private readonly alertService: AlertService) { \n\n    }\n}\n","<div *ngFor=\"let alert of activeAlerts\" [class]=\"'m-1 shadow-sm alert ' + getAlertClass(alert)\">\n    {{alert.message}}\n</div>","export class UserHasActiveBorrowsError extends Error {\n    \n}","import { Component, TemplateRef, ViewChild, ElementRef, AfterViewInit, Output, EventEmitter, Input } from '@angular/core';\n\n@Component({\n    selector: 'app-confirm-dialog',\n    templateUrl: './confirm-dialog.component.html',\n    styleUrls: ['./confirm-dialog.component.scss']\n})\nexport class ConfirmDialogComponent implements AfterViewInit {\n    @Input()\n    title: string;\n    @Input()\n    message: string;\n    @Output()\n    close = new EventEmitter<boolean>();\n    @ViewChild(\"modal\", { static: true }) \n    modal: ElementRef<any>;\n\n    confirmed = false;\n\n    ngAfterViewInit() {\n        // @ts-ignore\n        let modalElement = $(this.modal.nativeElement);\n\n        modalElement.modal({});\n        modalElement.on(\"hidden.bs.modal\", () => this.close.emit(this.confirmed));\n    }\n}\n","<div #modal class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\">{{title}}</h5>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">{{message}}</div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\">Ne</button>\n                <button type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" (click)=\"confirmed = true\">Ano</button>\n            </div>\n        </div>\n    </div>\n</div>","import { User } from 'src/app/core/users/user';\n\nexport class UserViewModel {\n    constructor(\n        public original: User,\n        public newUserName: string,\n        public newPassword: string,\n        public newFirstName: string,\n        public newLastName: string,\n        public newEmail: string,\n        public newIsLibrarian: boolean,\n        public newIsAdministrator: boolean\n    ) { }\n\n    get isChanged(): boolean {\n        if (this.original == null) {\n            return this.newUserName !== \"\" || this.newPassword !== \"\" || this.newFirstName !== \"\" || this.newLastName !== \"\" || this.newEmail !== \"\" || \n                this.newIsLibrarian !== false ||this.newIsAdministrator !== false;\n        }\n        else {\n            return this.newUserName !== this.original.userName || this.newPassword !== \"\" || this.newFirstName !== this.original.firstName || \n            this.newLastName !== this.original.lastName || this.newEmail !== this.original.email || this.newIsLibrarian !== this.original.isLibrarian || \n            this.newIsAdministrator !== this.original.isAdministrator;\n        }\n    }\n\n    get isUserNameValid() {\n        return this.newUserName.length > 0;\n    }\n\n    get isPasswordValid() {\n        return this.newPassword.length >= 8 || (this.original !== null && this.newPassword === \"\");\n    }\n\n    get isEmailValid() {\n        return this.newEmail === \"\" || /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n            .test(this.newEmail);\n    }\n\n    get isValid() {\n        return this.isUserNameValid && this.isPasswordValid && this.isEmailValid;\n    }\n\n    resetToOriginal() {\n        if (this.original !== null) {\n            this.newUserName = this.original.userName;\n            this.newPassword = \"\";\n            this.newFirstName = this.original.firstName;\n            this.newLastName = this.original.lastName;\n            this.newEmail = this.original.email;\n            this.newIsLibrarian = this.original.isLibrarian;\n            this.newIsAdministrator = this.original.isAdministrator;\n        } else {\n            this.newUserName = \"\";\n            this.newPassword = \"\";\n            this.newFirstName = \"\";\n            this.newLastName = \"\";\n            this.newEmail = \"\";\n            this.newIsLibrarian = false;\n            this.newIsAdministrator = false;\n        }\n    }\n}","import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { Injectable, InjectionToken, Inject } from '@angular/core';\nimport { SignInService } from 'src/app/core/sign-in/sign-in.service';\n\nexport const SIGN_IN_URL = new InjectionToken<string>(\"Sign in page url.\");\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SignedInCanActivate implements CanActivate {\n    constructor(private readonly signInService: SignInService, @Inject(SIGN_IN_URL) private readonly signInUrl: string) {\n\n    }\n\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | UrlTree | Observable<boolean | UrlTree> | Promise<boolean | UrlTree> {\n        let signedIn = this.signInService.signedUser !== null;\n\n        if (!signedIn)\n            window.location.href = this.signInUrl + \"?redirectUrl=\" + window.location.href;\n\n        return signedIn;\n    }\n}","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}