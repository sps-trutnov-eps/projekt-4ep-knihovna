{"version":3,"sources":["webpack:///src/app/alerts/alert.service.ts","webpack:///src/app/http-interceptors/with-credentials-http-interceptor.ts","webpack:///src/app/app-initialize.service.ts","webpack:///src/app/core/sign-in/sign-in.service.ts","webpack:///src/app/core/api/api.ts","webpack:///src/app/pages/app/main-navigation/main-navigation.component.ts","webpack:///src/app/pages/app/main-navigation/main-navigation.component.html","webpack:///src/app/pages/app/app.component.ts","webpack:///src/app/pages/app/app.component.html","webpack:///src/app/core/users/user-name-already-used-error.ts","webpack:///src/app/core/users/user.service.ts","webpack:///src/app/pages/app/main-footer/main-footer.component.ts","webpack:///src/app/pages/app/main-footer/main-footer.component.html","webpack:///src/app/pages/users/users.component.html","webpack:///src/app/pages/users/users.component.ts","webpack:///src/environments/environment.ts","webpack:///src/app/core/users/user.ts","webpack:///src/app/alerts/alert.ts","webpack:///src/app/routing/app-routing.module.ts","webpack:///src/app/app.module.ts","webpack:///src/app/alerts/alert-type.ts","webpack:///src/app/alerts/alert-view/alert-view.component.ts","webpack:///src/app/alerts/alert-view/alert-view.component.html","webpack:///src/app/core/users/user-has-active-borrows-error.ts","webpack:///src/app/dialogs/confirm-dialog/confirm-dialog.component.ts","webpack:///src/app/dialogs/confirm-dialog/confirm-dialog.component.html","webpack:///src/app/pages/users/user-view-model.ts","webpack:///src/app/routing/can-activates/signed-in-can-activate.ts","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["AlertService","active","message","type","info","alert","push","setTimeout","shift","WithCredentialsHttpInterceptor","request","next","requestWithCredentials","clone","withCredentials","handle","AppInitializeService","userService","signInService","getSignedIn","toPromise","user","signIn","SignInService","signedUserChanged","_signedUser","emit","API_URL","SIGN_OUT_URL","USER_MODULE_URL","LIBRARIAN_MODULE_URL","MainNavigationComponent","signOutUrl","userModuleUrl","librarianModuleUrl","location","signedUser","signOut","window","href","AppComponent","UserNameAlreadyUsedError","Error","UserService","httpClient","apiUrl","options","parameters","idFilter","undefined","toString","userNameFilter","firstNameFilter","lastNameFilter","emailFilter","isLibrarianFilter","isAdministratorFilter","get","params","pipe","u","map","id","userName","firstName","lastName","email","isLibrarian","isAdministrator","e","status","password","withoutId","withPassword","post","userData","put","MainFooterComponent","UsersComponent","alertService","filterForm","idFilterValidator","valueChanges","subscribe","users","refreshUsers","isFiltred","addNewUser","some","isChanged","original","newUser","every","isValid","value","invalid","changesCount","filter","length","hasChanges","disable","emitEvent","enable","idFilterControl","parseInt","getAll","unshift","newUserName","newFirstName","newLastName","newEmail","newIsLibrarian","newIsAdministrator","newPassword","update","show","error","add","resetToOriginal","splice","indexOf","remove","forEach","save","discard","control","test","invalidId","kontrola","validniRadky","element","document","createElement","addEventListener","file","files","reader","FileReader","readAsText","onload","soubor","result","radky","split","i","atributyUsera","validniRadek","pop","uzivatel","click","uzivatele","downloadBlob","Blob","fileName","blob","url","URL","createObjectURL","linkElement","download","revokeObjectURL","saveAll","discardAll","environment","production","User","Alert","routes","path","component","canActivate","redirectTo","AppRoutingModule","forRoot","createAppInitializer","appInitializeService","intialize","AppModule","provide","useClass","multi","useFactory","deps","useValue","AlertType","AlertViewComponent","warning","UserHasActiveBorrowsError","ConfirmDialogComponent","close","confirmed","modalElement","$","modal","nativeElement","on","UserViewModel","isUserNameValid","isPasswordValid","isEmailValid","SIGN_IN_URL","SignedInCanActivate","signInUrl","route","state","signedIn","bootstrapModule","err","console","webpackEmptyAsyncContext","req","Promise","resolve","then","code","keys","module","exports"],"mappings":"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","file":"main-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AlertType } from './alert-type';\r\nimport { Alert } from './alert';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AlertService {\r\n    readonly active: Alert[] = [];\r\n\r\n    show(message: string, type: AlertType = AlertType.info) {\r\n        let alert = new Alert(message, type);\r\n        this.active.push(alert);\r\n\r\n        setTimeout(() => this.active.shift(), 2000);\r\n    }\r\n}\r\n","import { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class WithCredentialsHttpInterceptor implements HttpInterceptor {\r\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        let requestWithCredentials = request.clone({\r\n            withCredentials: true\r\n        });\r\n        \r\n        return next.handle(requestWithCredentials);\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { UserService } from './core/users/user.service';\r\nimport { SignInService } from './core/sign-in/sign-in.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AppInitializeService {\r\n    constructor(private readonly userService: UserService, private readonly signInService: SignInService) {\r\n\r\n    }\r\n\r\n    async intialize() {\r\n        let user = await this.userService.getSignedIn().toPromise();\r\n        if (user !== null)\r\n            this.signInService.signIn(user);\r\n    }\r\n}\r\n","import { Injectable, EventEmitter } from '@angular/core';\r\nimport { User } from '../users/user';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class SignInService {\r\n    readonly signedUserChanged = new EventEmitter();\r\n\r\n    private _signedUser: User = null;\r\n\r\n    get signedUser(): User {\r\n        return this._signedUser;\r\n    }\r\n\r\n    signIn(user: User) {\r\n        this._signedUser = user;\r\n        this.signedUserChanged.emit();\r\n    }\r\n\r\n    signOut() {\r\n        this._signedUser = null;\r\n        this.signedUserChanged.emit();\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport const API_URL = new InjectionToken<string>(\"Url of api root.\");","import { Component, InjectionToken, Inject } from '@angular/core';\r\nimport { User } from 'src/app/core/users/user';\r\nimport { SignInService } from 'src/app/core/sign-in/sign-in.service';\r\nimport { Location } from '@angular/common';\r\n\r\nexport const SIGN_OUT_URL = new InjectionToken<string>(\"Sign out page url.\");\r\nexport const USER_MODULE_URL = new InjectionToken<string>(\"User module root page url.\");\r\nexport const LIBRARIAN_MODULE_URL = new InjectionToken<string>(\"Librarian module root page url.\");\r\n\r\n@Component({\r\n    selector: 'app-main-navigation',\r\n    templateUrl: './main-navigation.component.html',\r\n    styleUrls: ['./main-navigation.component.scss']\r\n})\r\nexport class MainNavigationComponent {\r\n    get signedUser(): User {\r\n        return this.signInService.signedUser;\r\n    }\r\n\r\n    constructor(private readonly signInService: SignInService, @Inject(SIGN_OUT_URL) private readonly signOutUrl: string, \r\n        @Inject(USER_MODULE_URL) readonly userModuleUrl: string, @Inject(LIBRARIAN_MODULE_URL) readonly librarianModuleUrl: string, \r\n        private readonly location: Location) {\r\n    }\r\n\r\n    signOut() {\r\n        this.signInService.signOut();\r\n        window.location.href = this.signOutUrl + \"?redirectUrl=\" + this.userModuleUrl;\r\n    }\r\n}\r\n","<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n    <a class=\"navbar-brand\" routerLink=\"/\">Knihovna SPŠ Trutnov</a>\r\n    <ng-container *ngIf=\"signedUser !== null\">\r\n        <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\"\r\n            aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n            <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div class=\"collapse navbar-collapse justify-content-end\" id=\"navbarNavAltMarkup\">\r\n            <div class=\"navbar-nav\">\r\n                <a class=\"nav-item nav-link\" routerLink=\"/users\" routerLinkActive=\"active\">\r\n                    <i class=\"fas fa-user-friends\"></i>\r\n                    Uživatelé\r\n                </a>\r\n                <a class=\"nav-item nav-link\" href=\"{{userModuleUrl}}\">\r\n                    <i class=\"fas fa-book\"></i>\r\n                    Uživatel\r\n                </a>\r\n                <a *ngIf=\"signedUser.isLibrarian\" class=\"nav-item nav-link\" href=\"{{librarianModuleUrl}}\">\r\n                    <i class=\"fas fa-book-medical\"></i>\r\n                    Knihovník\r\n                </a>\r\n                <div class=\"dropdown\">\r\n                    <button class=\"btn btn-link dropdown-toggle nav-item nav-link active text-left border-0\"\r\n                        role=\"button\" id=\"userDropdownMenuLink\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                        aria-expanded=\"false\">\r\n                        <i class=\"fas fa-user\"></i>\r\n                        {{signedUser.userName}}\r\n                    </button>\r\n\r\n                    <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"userDropdownMenuLink\">\r\n                        <a class=\"dropdown-item btn btn-link pl-3\" (click)=\"signOut()\">\r\n                            <i class=\"fas fa-sign-out-alt pr-1\"></i>\r\n                            Odhlásit se\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</nav>","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-root',\r\n    templateUrl: './app.component.html',\r\n    styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n\r\n}\r\n","<app-main-navigation></app-main-navigation>\r\n<router-outlet class=\"router-outlet-flex-grow-1\"></router-outlet>\r\n<app-main-footer></app-main-footer>\r\n    \r\n<div class=\"fixed-top p-5 alert-view-container\">\r\n    <app-alert-view></app-alert-view>\r\n</div>","export class UserNameAlreadyUsedError extends Error {\r\n    \r\n}","import { Injectable, Inject } from '@angular/core';\r\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { Observable, throwError, of } from 'rxjs';\r\nimport { map, catchError } from 'rxjs/operators';\r\nimport { User } from './user';\r\nimport { UserNameAlreadyUsedError } from './user-name-already-used-error';\r\nimport { API_URL } from '../api/api';\r\nimport { UserHasActiveBorrowsError } from './user-has-active-borrows-error';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class UserService {\r\n    public constructor(private readonly httpClient: HttpClient, @Inject(API_URL) private readonly apiUrl: string) {\r\n\r\n    }\r\n\r\n    getAll(options: { idFilter?: number, userNameFilter?: string, firstNameFilter?: string, lastNameFilter?: string, emailFilter?: string, \r\n        isLibrarianFilter?: boolean, isAdministratorFilter?: boolean } = {}): Observable<User[]> {\r\n        let parameters = {\r\n            ...options.idFilter !== undefined && { \"id-filter\": options.idFilter.toString() },\r\n            ...options.userNameFilter !== undefined && { \"user-name-filter\": options.userNameFilter },\r\n            ...options.firstNameFilter !== undefined && { \"first-name-filter\": options.firstNameFilter },\r\n            ...options.lastNameFilter !== undefined && { \"last-name-filter\": options.lastNameFilter },\r\n            ...options.emailFilter !== undefined && { \"email-filter\": options.emailFilter },\r\n            ...options.isLibrarianFilter !== undefined && { \"is-librarian-filter\": options.isLibrarianFilter.toString() },\r\n            ...options.isAdministratorFilter !== undefined && { \"is-administrator-filter\": options.isAdministratorFilter.toString() }\r\n        };\r\n\r\n        return this.httpClient.get<User[]>(`${this.apiUrl}/users/index.php`, { params: parameters }).pipe(\r\n            map(u => u.map(u => new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator)))\r\n        );\r\n    }\r\n\r\n    getById(id: number): Observable<User> {\r\n        return this.httpClient.get<User>(`${this.apiUrl}/users/index.php?id=${id}`).pipe(\r\n            map(u => new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator))\r\n        );\r\n    }\r\n\r\n    getSignedIn(): Observable<User> {\r\n        return this.httpClient.get<User>(`${this.apiUrl}/users/index.php?id=`).pipe(\r\n            catchError((e: HttpErrorResponse) => e.status === 401 ? of(null) : throwError(e)),\r\n            map(u => u === null ? null : new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator))\r\n        );\r\n    }\r\n\r\n    add(user: User, password: string): Observable<User> {\r\n        let { id, ...withoutId } = user;\r\n        let withPassword = { ...withoutId, password };\r\n\r\n        return this.httpClient.post<User>(`${this.apiUrl}/users/index.php`, withPassword).pipe(\r\n            catchError((e: HttpErrorResponse) => e.status === 409 ? throwError(new UserNameAlreadyUsedError()) : throwError(e)),\r\n            map(u => new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator))\r\n        );\r\n    }\r\n\r\n    update(user: User, password: string | undefined): Observable<User> {\r\n        let userData = password === undefined ? user : { ...user, password };\r\n\r\n        return this.httpClient.put<User>(`${this.apiUrl}/users/index.php?id=${user.id}`, userData).pipe(\r\n            catchError((e: HttpErrorResponse) => e.status === 409 ? throwError(new UserNameAlreadyUsedError()) : throwError(e)),\r\n            map(u => new User(u.id, u.userName, u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator))\r\n        );\r\n    }\r\n\r\n    remove(user: User): Observable<any> {\r\n        return this.httpClient.delete(`${this.apiUrl}/users/index.php?id=${user.id}`).pipe(\r\n            catchError((e: HttpErrorResponse) => e.status === 409 ? throwError(new UserHasActiveBorrowsError()) : throwError(e)),\r\n        )\r\n    }\r\n}","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-main-footer',\r\n    templateUrl: './main-footer.component.html',\r\n    styleUrls: ['./main-footer.component.scss']\r\n})\r\nexport class MainFooterComponent {\r\n\r\n}\r\n","<div class=\"p-1 pr-2 text-muted text-right text-sm\">\r\n    <small>\r\n        Administrace knihovny\r\n        <a href=\"https://www.spstrutnov.cz\" target=\"_blank\">SPŠ Trutnov</a>\r\n    </small>\r\n</div>","<div class=\"d-flex align-items-center\">\r\n    <h2 class=\"m-4 flex-grow-1\">Uživatelé</h2>\r\n    <button class=\"btn btn-secondary m-1\" (click)=\"export()\">Exportovat</button>\r\n    <button class=\"btn btn-secondary m-1 mr-4\"(click)=\"import()\">Importovat</button>\r\n</div>\r\n<table class=\"table table-striped table-hover\">\r\n    <thead>\r\n        <tr [formGroup]=\"filterForm\">\r\n            <th class=\"sticky-top bg-white table-column-id\">\r\n                Id\r\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"id\" [class.is-invalid]=\"!isIdFilterValid\">\r\n            </th>\r\n            <th class=\"table-column-fill sticky-top bg-white\">\r\n                Uživatelské jméno\r\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"userName\">\r\n            </th>\r\n            <th class=\"table-column-fill sticky-top bg-white align-top\">Heslo</th>\r\n            <th class=\"table-column-fill sticky-top bg-white\">\r\n                Jméno\r\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"firstName\">\r\n            </th>\r\n            <th class=\"table-column-fill sticky-top bg-white\">\r\n                Příjmení\r\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"lastName\">\r\n            </th>\r\n            <th class=\"table-column-fill sticky-top bg-white\">\r\n                Email\r\n                <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"email\">\r\n            </th>\r\n            <th class=\"sticky-top bg-white\">\r\n                Knihovník\r\n                <div class=\"form-check text-center\">\r\n                    <input style=\"width: 18px; height: 19px; cursor: pointer;\" class=\"form-check-input position-static\"\r\n                        type=\"checkbox\" formControlName=\"isLibrarian\">\r\n                </div>\r\n            </th>\r\n            <th class=\"sticky-top bg-white\">\r\n                Administrátor\r\n                <div class=\"form-check text-center\">\r\n                    <input style=\"width: 18px; height: 19px; cursor: pointer;\" class=\"form-check-input position-static\"\r\n                        type=\"checkbox\" formControlName=\"isAdministrator\">\r\n                </div>\r\n            </th>\r\n            <th class=\"sticky-top bg-white text-nowrap\">\r\n                <small class=\"text-muted font-weight-normal text-center d-block pb-1\">{{changesText}}</small>\r\n                <button [class.invisible]=\"!hasChanges\" [disabled]=\"!isAllValid\" class=\"btn btn-sm btn-success mr-1\"\r\n                    (click)=\"saveAll()\">Uložit</button>\r\n                <button [class.invisible]=\"!hasChanges\" class=\"btn btn-sm btn-danger ml-1\"\r\n                    (click)=\"discardAll()\">Zahodit</button>\r\n            </th>\r\n            <th class=\"sticky-top bg-white\"></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr *ngFor=\"let user of users\"\r\n            [class.table-warning]=\"(user.isChanged || user.original === null) && user !== newUser\">\r\n            <td class=\"table-column-id align-middle\">\r\n                <ng-container *ngIf=\"user.original !== null\">{{user.original.id}}</ng-container>\r\n                <i *ngIf=\"user.original === null\" class=\"fas fa-plus\"></i>\r\n            </td>\r\n            <td class=\"table-column-fill\">\r\n                <input [class.is-invalid]=\"!user.isUserNameValid && user !== newUser\"\r\n                    class=\"form-control form-control-sm editable-cell\" placeholder=\"Nevyplněno\" type=\"text\"\r\n                    [(ngModel)]=\"user.newUserName\">\r\n            </td>\r\n            <td class=\"table-column-fill\">\r\n                <input [class.is-invalid]=\"!user.isPasswordValid && user !== newUser\"\r\n                    class=\"form-control form-control-sm editable-cell\"\r\n                    [placeholder]=\"user.original === null ? 'Nevyplněno' : 'Nezměněno'\" type=\"password\"\r\n                    [(ngModel)]=\"user.newPassword\">\r\n            </td>\r\n            <td class=\"table-column-fill\">\r\n                <input class=\"form-control form-control-sm editable-cell\" placeholder=\"Nevyplněno\" type=\"text\"\r\n                    [(ngModel)]=\"user.newFirstName\">\r\n            </td>\r\n            <td class=\"table-column-fill\">\r\n                <input class=\"form-control form-control-sm editable-cell\" placeholder=\"Nevyplněno\" type=\"text\"\r\n                    [(ngModel)]=\"user.newLastName\">\r\n            </td>\r\n            <td class=\"table-column-fill\">\r\n                <input [class.is-invalid]=\"!user.isEmailValid && user !== newUser\"\r\n                    class=\"form-control form-control-sm editable-cell\" placeholder=\"Nevyplněno\" type=\"text\"\r\n                    [(ngModel)]=\"user.newEmail\">\r\n            </td>\r\n            <td>\r\n                <div class=\"form-check text-center\">\r\n                    <input style=\"width: 18px; height: 19px; cursor: pointer;\" class=\"form-check-input position-static\"\r\n                        type=\"checkbox\" [(ngModel)]=\"user.newIsLibrarian\">\r\n                </div>\r\n            </td>\r\n            <td>\r\n                <div class=\"form-check text-center\">\r\n                    <input style=\"width: 18px; height: 19px; cursor: pointer;\" class=\"form-check-input position-static\"\r\n                        type=\"checkbox\" [(ngModel)]=\"user.newIsAdministrator\">\r\n                </div>\r\n            </td>\r\n            <td class=\"pr-0 text-nowrap\">\r\n                <button [class.invisible]=\"!user.isChanged && user.original !== null || user === newUser\"\r\n                    [disabled]=\"!user.isValid\" class=\"btn btn-sm btn-success mr-1\" (click)=\"save(user)\">Uložit</button>\r\n                <button [class.invisible]=\"!user.isChanged && user.original !== null || user === newUser\"\r\n                    class=\"btn btn-sm btn-danger ml-1\" (click)=\"discard(user)\">Zahodit</button>\r\n            </td>\r\n            <td>\r\n                <i *ngIf=\"user.original !== null\" class=\"fas fa-trash fa-2x cursor-pointer text-muted\"\r\n                    style=\"font-size: 1.5em\" (click)=\"remove(user)\"></i>\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n<div *ngIf=\"users === undefined\" class=\"flex-grow-1 d-flex justify-content-center align-items-center\">\r\n    <div class=\"spinner-border\" role=\"status\">\r\n        <span class=\"sr-only\">Načítání...</span>\r\n    </div>\r\n</div>\r\n<div *ngIf=\"users !== undefined && users.length === 1 && !isFiltred\" class=\"flex-grow-1 d-flex justify-content-center align-items-center\">\r\n    <span class=\"text-muted\">Databáze neobsahuje žádné záznamy.</span>\r\n</div>\r\n<div *ngIf=\"users !== undefined && users.length === 0 && isFiltred\" class=\"flex-grow-1 d-flex justify-content-center align-items-center\">\r\n    <span class=\"text-muted\">Podle zadaných kritérií nebyly nalezeny žádné záznamy.</span>\r\n</div>","import { Component, OnInit, OnChanges, SimpleChanges, DoCheck } from '@angular/core';\r\nimport { UserService } from 'src/app/core/users/user.service';\r\nimport { User } from 'src/app/core/users/user';\r\nimport { UserViewModel } from './user-view-model';\r\nimport { AlertService } from 'src/app/alerts/alert.service';\r\nimport { AlertType } from 'src/app/alerts/alert-type';\r\nimport { UserNameAlreadyUsedError } from 'src/app/core/users/user-name-already-used-error';\r\nimport { FormGroup, FormControl, Validators, ValidationErrors, AbstractControl } from '@angular/forms';\r\nimport { UserHasActiveBorrowsError } from 'src/app/core/users/user-has-active-borrows-error';\r\n\r\n@Component({\r\n    selector: 'app-users',\r\n    templateUrl: './users.component.html',\r\n    styleUrls: ['./users.component.scss']\r\n})\r\nexport class UsersComponent implements OnInit, DoCheck {\r\n    users: UserViewModel[];\r\n    newUser: UserViewModel;\r\n\r\n    filterForm = new FormGroup({\r\n        id: new FormControl(\"\", this.idFilterValidator),\r\n        userName: new FormControl(\"\"),\r\n        firstName: new FormControl(\"\"),\r\n        lastName: new FormControl(\"\"),\r\n        email: new FormControl(\"\"),\r\n        isLibrarian: new FormControl(false),\r\n        isAdministrator: new FormControl(false)\r\n    });\r\n\r\n    get hasChanges(): boolean {\r\n        return this.users !== undefined && this.users.some(u => (u.isChanged || u.original === null) && u !== this.newUser)\r\n    }\r\n\r\n    get isAllValid(): boolean {\r\n        return this.users === undefined || this.users.every(u => u.isValid || u === this.newUser);\r\n    }\r\n\r\n    get isFiltred(): boolean {\r\n        return this.filterForm.get(\"id\").value != \"\" || this.filterForm.get(\"userName\").value != \"\" || this.filterForm.get(\"firstName\").value != \"\" ||\r\n            this.filterForm.get(\"lastName\").value != \"\" || this.filterForm.get(\"email\").value != \"\" || this.filterForm.get(\"isLibrarian\").value != false ||\r\n            this.filterForm.get(\"isAdministrator\").value != false;\r\n    }\r\n\r\n    get isIdFilterValid(): boolean {\r\n        return !this.filterForm.get(\"id\").invalid;\r\n    }\r\n\r\n    get changesText(): string {\r\n        if (this.users === undefined)\r\n            return \"\";\r\n\r\n        let changesCount = this.users\r\n            .filter(u => u.isChanged)\r\n            .length;\r\n\r\n        if (changesCount === 0)\r\n            return \"\";\r\n        else if (changesCount === 1)\r\n            return `${changesCount} změna.`;\r\n        else if (changesCount > 1 && changesCount < 5)\r\n            return `${changesCount} změny.`;\r\n        else\r\n            return `${changesCount} změn.`;\r\n    }\r\n\r\n    constructor(private readonly userService: UserService, private readonly alertService: AlertService) {\r\n        this.filterForm.valueChanges.subscribe(async () => {\r\n            this.users = undefined;\r\n\r\n            await this.refreshUsers();\r\n\r\n            if (!this.isFiltred)\r\n                this.addNewUser();\r\n        });\r\n    }\r\n\r\n    async ngOnInit() {\r\n        await this.refreshUsers();\r\n        this.addNewUser();\r\n    }\r\n\r\n    ngDoCheck() {\r\n        if (this.newUser != undefined && this.newUser.isChanged)\r\n            this.addNewUser();\r\n\r\n        if (this.hasChanges)\r\n            this.filterForm.disable({ emitEvent: false });\r\n        else\r\n            this.filterForm.enable({ emitEvent: false });\r\n    }\r\n\r\n    private async refreshUsers() {\r\n        let idFilterControl = this.filterForm.get(\"id\");\r\n        let idFilter = idFilterControl.value;\r\n        let userNameFilter = this.filterForm.get(\"userName\").value;\r\n        let firstNameFilter = this.filterForm.get(\"firstName\").value;\r\n        let lastNameFilter = this.filterForm.get(\"lastName\").value;\r\n        let emailFilter = this.filterForm.get(\"email\").value;\r\n        let isLibrarianFilter = this.filterForm.get(\"isLibrarian\").value;\r\n        let isAdministratorFilter = this.filterForm.get(\"isAdministrator\").value;\r\n\r\n        let options = {\r\n            ...idFilter !== \"\" && !idFilterControl.invalid && { idFilter: parseInt(idFilter) },\r\n            ...userNameFilter !== \"\" && { userNameFilter },\r\n            ...firstNameFilter !== \"\" && { firstNameFilter },\r\n            ...lastNameFilter !== \"\" && { lastNameFilter },\r\n            ...emailFilter !== \"\" && { emailFilter },\r\n            ...isLibrarianFilter !== false && { isLibrarianFilter },\r\n            ...isAdministratorFilter !== false && { isAdministratorFilter }\r\n        };\r\n\r\n        this.users = (await this.userService.getAll(options).toPromise())\r\n            .map(u => new UserViewModel(u, u.userName, \"\", u.firstName, u.lastName, u.email, u.isLibrarian, u.isAdministrator));\r\n    }\r\n\r\n    private addNewUser() {\r\n        this.newUser = new UserViewModel(null, \"\", \"\", \"\", \"\", \"\", false, false);\r\n        this.users.unshift(this.newUser);\r\n    }\r\n\r\n    async save(user: UserViewModel) {\r\n        let newUser;\r\n        if (user.original != null) {\r\n            let u = new User(user.original.id, user.newUserName, user.newFirstName, user.newLastName, user.newEmail, user.newIsLibrarian, user.newIsAdministrator);\r\n            let newPassword = user.newPassword === \"\" ? undefined : user.newPassword;\r\n            try {\r\n                newUser = await this.userService.update(u, newPassword).toPromise();\r\n            }\r\n            catch (e) {\r\n                if (e instanceof UserNameAlreadyUsedError) {\r\n                    this.alertService.show(`Uživatelské jméno '${u.userName}' již používá někdo jiný.`, AlertType.error);\r\n                    return;\r\n                }\r\n                throw e;\r\n            }\r\n        }\r\n        else {\r\n            let u = new User(0, user.newUserName, user.newFirstName, user.newLastName, user.newEmail, user.newIsLibrarian, user.newIsAdministrator);\r\n            try {\r\n                newUser = await this.userService.add(u, user.newPassword).toPromise();\r\n            }\r\n            catch (e) {\r\n                if (e instanceof UserNameAlreadyUsedError) {\r\n                    this.alertService.show(`Uživatelské jméno '${u.userName}' již používá někdo jiný.`, AlertType.error);\r\n                    return;\r\n                }\r\n                throw e;\r\n            }\r\n        }\r\n        user.original = newUser;\r\n        user.resetToOriginal();\r\n    }\r\n\r\n    discard(user: UserViewModel) {\r\n        if (user.original == null)\r\n            this.users.splice(this.users.indexOf(user), 1);\r\n        else\r\n            user.resetToOriginal();\r\n    }\r\n\r\n    async remove(user: UserViewModel) {\r\n        try {\r\n            await this.userService.remove(user.original).toPromise();\r\n            this.users.splice(this.users.indexOf(user), 1);\r\n        }\r\n        catch (e) {\r\n            if (e instanceof UserHasActiveBorrowsError) {\r\n                this.alertService.show(\"Nelze smazat uživatele s aktivními výpůjčkami.\", AlertType.error);\r\n                return;\r\n            }\r\n            throw e;\r\n        }\r\n    }\r\n\r\n    saveAll() {\r\n        this.users\r\n            .filter(u => u.isChanged)\r\n            .forEach(u => this.save(u));\r\n    }\r\n\r\n    discardAll() {\r\n        this.users\r\n            .filter(u => u.isChanged || u.original === null && u !== this.newUser)\r\n            .forEach(u => this.discard(u));\r\n    }\r\n\r\n    private idFilterValidator(control: AbstractControl): ValidationErrors | null {\r\n        if (/^(0|(-?[1-9][0-9]*)|)$/.test(control.value))\r\n            return null;\r\n        else\r\n            return { invalidId: true };\r\n    }\r\n\r\n    import() {\r\n        let kontrola = 0;\r\n        let validniRadky = [];\r\n        let element = document.createElement(\"input\");\r\n        element.type = \"file\";\r\n        element.addEventListener(\"change\", () => {\r\n            let file = element.files[0];\r\n            let reader = new FileReader();\r\n            reader.readAsText(file, \"UTF-8\");\r\n            reader.onload = () => {\r\n                let soubor = <string>reader.result;\r\n                let radky = soubor.split(/\\r\\n?|\\n/);\r\n\r\n                for (let i = 0; i < radky.length; i++) {\r\n                    let atributyUsera = radky[i].split(\",\");\r\n                    if (atributyUsera.length != 7 || (atributyUsera[5] != \"true\" && atributyUsera[5] != \"false\") || (atributyUsera[6] != \"true\" && atributyUsera[6] != \"false\")) {\r\n                        this.alertService.show(\"Chyba na řádku \" + (i + 1), AlertType.error);\r\n                        kontrola++;\r\n                    }\r\n                    else {\r\n                        validniRadky.push(atributyUsera);\r\n                    }\r\n                }\r\n                if (kontrola == 0) {\r\n                    for (let i = 0; i < radky.length; i++) {\r\n                        let validniRadek = validniRadky.pop();\r\n                        let uzivatel = new UserViewModel(null, validniRadek[0], validniRadek[1], validniRadek[2], validniRadek[3], validniRadek[4], validniRadek[5] === \"true\", validniRadek[6] === \"true\");\r\n                        this.users.unshift(uzivatel);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        element.click();\r\n    }\r\n\r\n    async export() {\r\n        let soubor = \"\";\r\n        let uzivatele = await this.userService.getAll().toPromise();\r\n        for (let i = 0; i < uzivatele.length; i++) {\r\n            let uzivatel = uzivatele[i];\r\n            if (i != 0)\r\n                soubor += \"\\n\";\r\n            soubor += uzivatel.userName;\r\n            soubor += \",\";\r\n            soubor += uzivatel.firstName;\r\n            soubor += \",\";\r\n            soubor += uzivatel.lastName;\r\n            soubor += \",\";\r\n            soubor += uzivatel.email;\r\n            soubor += \",\";\r\n            soubor += uzivatel.isLibrarian;\r\n            soubor += \",\";\r\n            soubor += uzivatel.isAdministrator;\r\n        }\r\n        this.downloadBlob(\"Sysadmin - export uživatelů.txt\", new Blob([soubor]));\r\n    }\r\n\r\n    private downloadBlob(fileName: string, blob: Blob) {\r\n        let url = URL.createObjectURL(blob);\r\n\r\n        let linkElement = document.createElement(\"a\");\r\n        linkElement.download = fileName;\r\n        linkElement.href = url;\r\n\r\n        linkElement.click();\r\n\r\n        URL.revokeObjectURL(url);\r\n    }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","export class User {\r\n    constructor(\r\n        public readonly id: number, \r\n        public readonly userName: string,\r\n        public readonly firstName: string,\r\n        public readonly lastName: string,\r\n        public readonly email: string,\r\n        public readonly isLibrarian: boolean,\r\n        public readonly isAdministrator: boolean\r\n    ) { }\r\n}","import { AlertType } from './alert-type';\r\n\r\nexport class Alert {\r\n    constructor(\r\n        public readonly message: string,\r\n        public readonly type: AlertType\r\n    ) { }\r\n}","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { UsersComponent } from '../pages/users/users.component';\r\nimport { SignedInCanActivate } from './can-activates/signed-in-can-activate';\r\n\r\nconst routes: Routes = [\r\n    { path: \"users\", component: UsersComponent, canActivate: [SignedInCanActivate] },\r\n    { path: \"**\", redirectTo: \"users\" }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forRoot(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { NgModule, APP_INITIALIZER } from '@angular/core';\r\nimport { AppRoutingModule } from './routing/app-routing.module';\r\nimport { AppComponent } from './pages/app/app.component';\r\nimport { UsersComponent } from './pages/users/users.component';\r\nimport { MainNavigationComponent, SIGN_OUT_URL, USER_MODULE_URL, LIBRARIAN_MODULE_URL } from './pages/app/main-navigation/main-navigation.component';\r\nimport { AlertViewComponent } from './alerts/alert-view/alert-view.component';\r\nimport { API_URL } from './core/api/api';\r\nimport { ConfirmDialogComponent } from './dialogs/confirm-dialog/confirm-dialog.component';\r\nimport { MainFooterComponent } from './pages/app/main-footer/main-footer.component';\r\nimport { SIGN_IN_URL } from './routing/can-activates/signed-in-can-activate';\r\nimport { WithCredentialsHttpInterceptor } from './http-interceptors/with-credentials-http-interceptor';\r\nimport { AppInitializeService } from './app-initialize.service';\r\n\r\nexport function createAppInitializer(appInitializeService: AppInitializeService) {\r\n    return async () => await appInitializeService.intialize();\r\n}\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppComponent,\r\n        UsersComponent,\r\n        MainNavigationComponent,\r\n        AlertViewComponent,\r\n        ConfirmDialogComponent,\r\n        MainFooterComponent\r\n    ],\r\n    imports: [\r\n        BrowserModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        HttpClientModule,\r\n        AppRoutingModule\r\n    ],\r\n    providers: [\r\n        {\r\n            provide: HTTP_INTERCEPTORS,\r\n            useClass: WithCredentialsHttpInterceptor,\r\n            multi: true\r\n        },\r\n        {\r\n            provide: APP_INITIALIZER,\r\n            useFactory: createAppInitializer,\r\n            deps: [AppInitializeService],\r\n            multi: true\r\n        },\r\n        {\r\n            provide: API_URL,\r\n            useValue: \"/knihovna/sysadmin/api\"\r\n        },\r\n        {\r\n            provide: SIGN_IN_URL,\r\n            useValue: \"/knihovna/authentication/signIn.php\"\r\n        },\r\n        {\r\n            provide: SIGN_OUT_URL,\r\n            useValue: \"/knihovna/authentication/signOut.php\"\r\n        },\r\n        {\r\n            provide: USER_MODULE_URL,\r\n            useValue: \"/knihovna/uzivatel\"\r\n        },\r\n        {\r\n            provide: LIBRARIAN_MODULE_URL,\r\n            useValue: \"/knihovna/knihovnik\"\r\n        }\r\n    ],\r\n    entryComponents: [\r\n        ConfirmDialogComponent\r\n    ],\r\n    bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","export enum AlertType {\r\n    info,\r\n    warning,\r\n    error\r\n}","import { Component } from '@angular/core';\r\nimport { AlertService } from '../alert.service';\r\nimport { Alert } from '../alert';\r\nimport { AlertType } from '../alert-type';\r\n\r\n@Component({\r\n    selector: 'app-alert-view',\r\n    templateUrl: './alert-view.component.html',\r\n    styleUrls: ['./alert-view.component.scss']\r\n})\r\nexport class AlertViewComponent {\r\n    get activeAlerts(): Alert[] {\r\n        return this.alertService.active;\r\n    }\r\n\r\n    getAlertClass(alert: Alert): string {\r\n        switch (alert.type) {\r\n            case AlertType.warning:\r\n                return \"alert-warning\";\r\n            case AlertType.error:\r\n                return \"alert-danger\";\r\n            default:\r\n                return \"alert-info\";\r\n        }\r\n    }\r\n\r\n    constructor(private readonly alertService: AlertService) { \r\n\r\n    }\r\n}\r\n","<div *ngFor=\"let alert of activeAlerts\" [class]=\"'m-1 shadow-sm alert ' + getAlertClass(alert)\">\r\n    {{alert.message}}\r\n</div>","export class UserHasActiveBorrowsError extends Error {\r\n    \r\n}","import { Component, TemplateRef, ViewChild, ElementRef, AfterViewInit, Output, EventEmitter, Input } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-confirm-dialog',\r\n    templateUrl: './confirm-dialog.component.html',\r\n    styleUrls: ['./confirm-dialog.component.scss']\r\n})\r\nexport class ConfirmDialogComponent implements AfterViewInit {\r\n    @Input()\r\n    title: string;\r\n    @Input()\r\n    message: string;\r\n    @Output()\r\n    close = new EventEmitter<boolean>();\r\n    @ViewChild(\"modal\", { static: true }) \r\n    modal: ElementRef<any>;\r\n\r\n    confirmed = false;\r\n\r\n    ngAfterViewInit() {\r\n        // @ts-ignore\r\n        let modalElement = $(this.modal.nativeElement);\r\n\r\n        modalElement.modal({});\r\n        modalElement.on(\"hidden.bs.modal\", () => this.close.emit(this.confirmed));\r\n    }\r\n}\r\n","<div #modal class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">{{title}}</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">{{message}}</div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\">Ne</button>\r\n                <button type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" (click)=\"confirmed = true\">Ano</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { User } from 'src/app/core/users/user';\r\n\r\nexport class UserViewModel {\r\n    constructor(\r\n        public original: User,\r\n        public newUserName: string,\r\n        public newPassword: string,\r\n        public newFirstName: string,\r\n        public newLastName: string,\r\n        public newEmail: string,\r\n        public newIsLibrarian: boolean,\r\n        public newIsAdministrator: boolean\r\n    ) { }\r\n\r\n    get isChanged(): boolean {\r\n        if (this.original == null) {\r\n            return this.newUserName !== \"\" || this.newPassword !== \"\" || this.newFirstName !== \"\" || this.newLastName !== \"\" || this.newEmail !== \"\" || \r\n                this.newIsLibrarian !== false ||this.newIsAdministrator !== false;\r\n        }\r\n        else {\r\n            return this.newUserName !== this.original.userName || this.newPassword !== \"\" || this.newFirstName !== this.original.firstName || \r\n            this.newLastName !== this.original.lastName || this.newEmail !== this.original.email || this.newIsLibrarian !== this.original.isLibrarian || \r\n            this.newIsAdministrator !== this.original.isAdministrator;\r\n        }\r\n    }\r\n\r\n    get isUserNameValid() {\r\n        return this.newUserName.length > 0;\r\n    }\r\n\r\n    get isPasswordValid() {\r\n        return this.newPassword.length >= 8 || (this.original !== null && this.newPassword === \"\");\r\n    }\r\n\r\n    get isEmailValid() {\r\n        return this.newEmail === \"\" || /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n            .test(this.newEmail);\r\n    }\r\n\r\n    get isValid() {\r\n        return this.isUserNameValid && this.isPasswordValid && this.isEmailValid;\r\n    }\r\n\r\n    resetToOriginal() {\r\n        if (this.original !== null) {\r\n            this.newUserName = this.original.userName;\r\n            this.newPassword = \"\";\r\n            this.newFirstName = this.original.firstName;\r\n            this.newLastName = this.original.lastName;\r\n            this.newEmail = this.original.email;\r\n            this.newIsLibrarian = this.original.isLibrarian;\r\n            this.newIsAdministrator = this.original.isAdministrator;\r\n        } else {\r\n            this.newUserName = \"\";\r\n            this.newPassword = \"\";\r\n            this.newFirstName = \"\";\r\n            this.newLastName = \"\";\r\n            this.newEmail = \"\";\r\n            this.newIsLibrarian = false;\r\n            this.newIsAdministrator = false;\r\n        }\r\n    }\r\n}","import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { Injectable, InjectionToken, Inject } from '@angular/core';\r\nimport { SignInService } from 'src/app/core/sign-in/sign-in.service';\r\n\r\nexport const SIGN_IN_URL = new InjectionToken<string>(\"Sign in page url.\");\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class SignedInCanActivate implements CanActivate {\r\n    constructor(private readonly signInService: SignInService, @Inject(SIGN_IN_URL) private readonly signInUrl: string) {\r\n\r\n    }\r\n\r\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | UrlTree | Observable<boolean | UrlTree> | Promise<boolean | UrlTree> {\r\n        let signedIn = this.signInService.signedUser !== null;\r\n\r\n        if (!signedIn)\r\n            window.location.href = this.signInUrl + \"?redirectUrl=\" + window.location.href;\r\n\r\n        return signedIn;\r\n    }\r\n}","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}